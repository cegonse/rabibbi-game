# Build log (Fri Oct 20 2017)

* Generated by: César González (cegonse@gmail.com)

## Git Update:

* STDOUT:
Updating de805bd..87bbe7f
Fast-forward
 game/main.c      |  22 +---
 game/room.c      |  29 +++++
 game/room.h      |  18 +++
 maps/room1.json  | 362 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 tools/tiled2c.js |  93 +++++++++++---
 5 files changed, 488 insertions(+), 36 deletions(-)
 create mode 100644 game/room.c
 create mode 100644 game/room.h
 create mode 100644 maps/room1.json

* STDERR:
From github.com:cegonse/rabibbi-game
   de805bd..87bbe7f  master     -> origin/master

## Repo clean:

* STDOUT:
rm -f  -f out/gfx.o out/init.o out/character.o out/tween.o out/room.o out/main.o out/sega.o out/rom_head.bin out/rom_head.o out/rom.out
rm -f  -f out.lst out/cmd_ out/rom.nm out/rom.wch out/rom.bin

* STDERR:

## Map files built from JSON to C:

**room1.json**

* STDOUT:

* STDERR:

**testmap.json**

* STDOUT:

* STDERR:
/home/jumble/rabibbi-game/tools/tiled2c.js:15
var mapName = inMap.properties.map_name;
                              ^

TypeError: Cannot read property 'map_name' of undefined
    at Object.<anonymous> (/home/jumble/rabibbi-game/tools/tiled2c.js:15:31)
    at Module._compile (module.js:570:32)
    at Object.Module._extensions..js (module.js:579:10)
    at Module.load (module.js:487:32)
    at tryModuleLoad (module.js:446:12)
    at Function.Module._load (module.js:438:3)
    at Module.runMain (module.js:604:10)
    at run (bootstrap_node.js:383:7)
    at startup (bootstrap_node.js:149:9)
    at bootstrap_node.js:496:3

## Game and rescomp build:

* STDOUT:
mkdir -p src/boot
mkdir -p out
mkdir -p out/src
mkdir -p out/res
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -c src/boot/rom_head.c -o out/rom_head.o
/opt/gendev/bin/m68k-elf-ld -T /opt/gendev/sgdk/md.ld -nostdlib --oformat binary -o out/rom_head.bin out/rom_head.o
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -c src/boot/sega.s -o out/sega.o
/opt/gendev/bin/rescomp gfx.res gfx.s
rescomp v1.6

Resource: SPRITE character_def "./gfx/rabbibi.png" 3 3 NONE 0
--> executing plugin SPRITE...

Resource: PALETTE tiles_pal_def "./gfx/basictiles.png"
--> executing plugin PALETTE...

Resource: TILESET basic_tiles_def "./gfx/basictiles.png" NONE
--> executing plugin TILESET...

Resource: PALETTE rabbibisden_tiles_pal_def "./gfx/tileset_rabbibisden.png"
--> executing plugin PALETTE...

Resource: TILESET rabbibisden_tiles_def "./gfx/tileset_rabbibisden.png" NONE
--> executing plugin TILESET...
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -O3 -flto -fuse-linker-plugin -fno-web -fno-gcse -fno-unit-at-a-time -fomit-frame-pointer -c gfx.s -o out/gfx.o
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -O3 -flto -fuse-linker-plugin -fno-web -fno-gcse -fno-unit-at-a-time -fomit-frame-pointer -c init.c -o out/init.o
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -O3 -flto -fuse-linker-plugin -fno-web -fno-gcse -fno-unit-at-a-time -fomit-frame-pointer -c character.c -o out/character.o
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -O3 -flto -fuse-linker-plugin -fno-web -fno-gcse -fno-unit-at-a-time -fomit-frame-pointer -c tween.c -o out/tween.o
/opt/gendev/bin/m68k-elf-gcc  -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -I/opt/gendev/sgdk/inc -I/opt/gendev/sgdk/res -B/opt/gendev/sgdk/bin -O3 -flto -fuse-linker-plugin -fno-web -fno-gcse -fno-unit-at-a-time -fomit-frame-pointer -c room.c -o out/room.o
Makefile:132: recipe for target 'out/room.o' failed
rm gfx.s

* STDERR:
In file included from room.c:1:0:
room.h:6:2: error: unknown type name 's8'
  s8 planeWidth;
  ^~
room.h:7:2: error: unknown type name 's8'
  s8 planeHeight;
  ^~
room.h:8:2: error: unknown type name 's8'
  s8 collisionEdges;
  ^~
room.h:10:2: error: unknown type name 'u16'
  u16 *planeData;
  ^~~
room.h:11:2: error: unknown type name 's16'
  s16 *collisionData;
  ^~~
room.h:12:2: error: unknown type name 'TileSet'
  TileSet *tilesetData;
  ^~~~~~~
room.h:13:2: error: unknown type name 'Palette'
  Palette *paletteData;
  ^~~~~~~
room.c: In function 'room_load':
room.c:10:2: warning: implicit declaration of function 'VDP_loadTileSet' [-Wimplicit-function-declaration]
  VDP_loadTileSet(room->tilesetData, TILE_USERINDEX, TRUE);
  ^~~~~~~~~~~~~~~
room.c:10:37: error: 'TILE_USERINDEX' undeclared (first use in this function)
  VDP_loadTileSet(room->tilesetData, TILE_USERINDEX, TRUE);
                                     ^~~~~~~~~~~~~~
room.c:10:37: note: each undeclared identifier is reported only once for each function it appears in
room.c:10:53: error: 'TRUE' undeclared (first use in this function)
  VDP_loadTileSet(room->tilesetData, TILE_USERINDEX, TRUE);
                                                     ^~~~
room.c:11:2: warning: implicit declaration of function 'VDP_setPalette' [-Wimplicit-function-declaration]
  VDP_setPalette(PAL0 + ROOM_PALETTE_INDEX, room->paletteData->data);
  ^~~~~~~~~~~~~~
room.c:11:17: error: 'PAL0' undeclared (first use in this function)
  VDP_setPalette(PAL0 + ROOM_PALETTE_INDEX, room->paletteData->data);
                 ^~~~
room.c:11:61: error: request for member 'data' in something not a structure or union
  VDP_setPalette(PAL0 + ROOM_PALETTE_INDEX, room->paletteData->data);
                                                             ^~
room.c:13:2: error: unknown type name 'u16'
  u16 currentTile = 0;
  ^~~
room.c:14:7: error: unknown type name 'u8'
  for (u8 x = 0; x < room->planeWidth; ++x)
       ^~
room.c:16:8: error: unknown type name 'u8'
   for (u8 y = 0; y < room->planeHeight; ++y)
        ^~
room.c:23:4: warning: implicit declaration of function 'VDP_setTileMapXY' [-Wimplicit-function-declaration]
    VDP_setTileMapXY(PLAN_A,
    ^~~~~~~~~~~~~~~~
room.c:23:21: error: 'PLAN_A' undeclared (first use in this function)
    VDP_setTileMapXY(PLAN_A,
                     ^~~~~~
room.c:24:5: warning: implicit declaration of function 'TILE_ATTR_FULL' [-Wimplicit-function-declaration]
     TILE_ATTR_FULL(PAL0 + ROOM_PALETTE_INDEX,FALSE,FALSE,FALSE,TILE_USERINDEX + currentTile),
     ^~~~~~~~~~~~~~
room.c:24:46: error: 'FALSE' undeclared (first use in this function)
     TILE_ATTR_FULL(PAL0 + ROOM_PALETTE_INDEX,FALSE,FALSE,FALSE,TILE_USERINDEX + currentTile),
                                              ^~~~~
make: *** [out/room.o] Error 1

